
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ===== User Model =====
enum UserStatus {
  ACTIVE
  BLOCKED
  INACTIVE
  SUSPENDED
}

model User {
  id           String   @id @default(uuid())
  name         String
  email        String   @unique
  password     String
  phoneNumber  String
  isVerified   Boolean  @default(false)
  status       UserStatus @default(ACTIVE)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}   


model Doctor {
  id               String              @id @default(uuid())
  userId           String              @unique
  fullName         String
  gender           String?
  dateOfBirth      DateTime?
  phoneNumber      String?
  email            String              @unique
  profileImage     String?
  bio              String?

  // Arrays
  languages        String[]            @default([]) 
  specializations  String[]            @default([])
  expertiseAreas   String[]            @default([])

  // JSONB fields
  education        Json?
  experience       Json?

  // Relations
  clinics          Clinic[]            @relation("DoctorClinics")
  availability     Availability[]      @relation("DoctorAvailability")
  consultationFees ConsultationFee[]   @relation("DoctorFees")

  createdAt        DateTime            @default(now())
  updatedAt        DateTime            @updatedAt
}


model Clinic {
  id          Int      @id @default(autoincrement())
  doctor      Doctor   @relation("DoctorClinics", fields: [doctorId], references: [id])
  doctorId    String

  clinicName  String
  address     String
  city        String
  state       String
  country     String
  postalCode  String
  phoneNumber String
}


model Availability {
  id         Int      @id @default(autoincrement())
  doctor     Doctor   @relation("DoctorAvailability", fields: [doctorId], references: [id])
  doctorId   String

  dayOfWeek  String   
  startTime  String   
  endTime    String
}



model ConsultationFee {
  id        Int      @id @default(autoincrement())
  doctor    Doctor   @relation("DoctorFees", fields: [doctorId], references: [id])
  doctorId  String

  mode      String  
  fee       Decimal  @db.Decimal(10, 2)
  currency  String   @default("INR")
}
